# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth (Google & VK)

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ Client ID –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

#### Google OAuth

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Google Cloud Console](https://console.cloud.google.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
4. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** ‚Üí **OAuth client ID**
5. –í—ã–±–µ—Ä–∏—Ç–µ **Web application**
6. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `Anixart Desktop App`
   - **Authorized JavaScript origins**: 
     - `http://localhost:5173` (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
     - `https://yourdomain.com` (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
   - **Authorized redirect URIs**:
     - `http://localhost:5173/auth`
     - `https://yourdomain.com/auth`
7. –ù–∞–∂–º–∏—Ç–µ **Create**
8. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID**

#### VK OAuth

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [VK Developers](https://vk.com/apps?act=manage)
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: `Anixart`
   - **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: `–í–µ–±-—Å–∞–π—Ç`
   - **–ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞**: `http://localhost:5173` –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω
   - **–ë–∞–∑–æ–≤—ã–π –¥–æ–º–µ–Ω**: `localhost:5173` –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
6. –í —Ä–∞–∑–¥–µ–ª–µ **Authorized redirect URI** –¥–æ–±–∞–≤—å—Ç–µ:
   - `http://localhost:5173/auth`
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

### 2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `src/ui/config/oauth.ts` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:

```typescript
export const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID_HERE';
export const VK_APP_ID = 'YOUR_VK_APP_ID_HERE';
```

**–ü—Ä–∏–º–µ—Ä:**
```typescript
export const GOOGLE_CLIENT_ID = '123456789-abcdefghijklmnop.apps.googleusercontent.com';
export const VK_APP_ID = '51234567';
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run dev
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173/auth`
2. –ù–∞–∂–º–∏—Ç–µ **"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"** –∏–ª–∏ **"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ VK"**
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã

## üîê –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ environment variables

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞:

**1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:**

```env
VITE_GOOGLE_CLIENT_ID=your_google_client_id
VITE_VK_APP_ID=your_vk_app_id
```

**2. –û–±–Ω–æ–≤–∏—Ç–µ `oauth.ts`:**

```typescript
export const GOOGLE_CLIENT_ID = import.meta.env.VITE_GOOGLE_CLIENT_ID || '';
export const VK_APP_ID = import.meta.env.VITE_VK_APP_ID || '';
```

**3. –û–±–Ω–æ–≤–∏—Ç–µ redirect URI –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

```typescript
export const OAUTH_REDIRECT_URI = 
    typeof window !== 'undefined' 
        ? `${window.location.origin}/auth`
        : '';
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ü–æ–ª—É—á–µ–Ω Google Client ID
- [ ] –ü–æ–ª—É—á–µ–Ω VK App ID
- [ ] Client IDs –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `oauth.ts`
- [ ] Redirect URIs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª—è—Ö Google –∏ VK
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- [ ] –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ö–æ–¥ —á–µ—Ä–µ–∑ VK —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ VK —Ä–∞–±–æ—Ç–∞–µ—Ç

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: "redirect_uri_mismatch"

**–ü—Ä–∏—á–∏–Ω–∞:** Redirect URI –≤ –∫–æ–¥–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤ –∫–æ–Ω—Å–æ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ Google/VK –¥–æ–±–∞–≤–ª–µ–Ω `http://localhost:5173/auth`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `OAUTH_REDIRECT_URI` –≤ –∫–æ–¥–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç

### –û—à–∏–±–∫–∞: "invalid_client"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π Client ID

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Client ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### OAuth –æ–∫–Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
- OAuth –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç, –∞ –Ω–µ popup, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

### –¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** CORS –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É –≤ DevTools
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –≤ fragment (#)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ redirect URIs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
   - [Google OAuth](https://developers.google.com/identity/protocols/oauth2)
   - [VK OAuth](https://dev.vk.com/api/access-token/getting-started)

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
- ‚úÖ –í—Ö–æ–¥ —á–µ—Ä–µ–∑ VK
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Google
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ VK

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã Google –∏ VK –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!

